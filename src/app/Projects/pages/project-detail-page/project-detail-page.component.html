<div class="container mx-auto p-4 md:p-6" *ngIf="p">
  <div class="flex justify-content-between align-items-center mb-3">
    <h2 class="m-0">{{ p.subtitle || 'Project Spotlight' }}: {{ p.title }}</h2>
    <div class="flex gap-2">
      <a routerLink="/projects" pButton class="p-button-text" label="← Volver a proyectos"></a>
      <a *ngIf="p.repoUrl" [href]="p.repoUrl" target="_blank" pButton class="p-button-sm p-button-text" label="Repositorio"></a>
      <a *ngIf="p.demoUrl" [href]="p.demoUrl" target="_blank" pButton class="p-button-sm" label="Demo"></a>
    </div>
  </div>

  <!-- Galería de imágenes con carrusel -->
  <section class="mt-4" *ngIf="p.gallery && p.gallery.length > 1">
    <h3>Galería del Proyecto</h3>
    <p-carousel 
      [value]="p.gallery" 
      [numVisible]="1" 
      [numScroll]="1" 
      [circular]="true"
      [autoplayInterval]="0"
      styleClass="custom-carousel">
      <ng-template let-image pTemplate="item">
        <div class="carousel-image-container">
          <img [src]="image" [alt]="p.title" class="carousel-image" />
        </div>
      </ng-template>
    </p-carousel>
  </section>

  <!-- Imagen principal si no hay galería o solo hay una imagen -->
  <img class="hero" [src]="p.cover" [alt]="p.title" *ngIf="!p.gallery || p.gallery.length <= 1">

  <section class="mt-4">
    <h3>Vista General</h3>
    <p class="text-300">{{ p.overview }}</p>
  </section>

  <section class="mt-4">
    <h3>Tecnologias utilizadas</h3>
    <div class="flex flex-wrap gap-2">
      <p-tag *ngFor="let s of p.stack" [value]="s"></p-tag>
    </div>
  </section>

  <section class="mt-4" *ngIf="p.challenges">
    <h3>Desafios y soluciones</h3>
    <p class="text-300">{{ p.challenges }}</p>
  </section>

  <section class="mt-4" *ngIf="p.results">
    <h3>Resultados</h3>
    <p class="text-300">{{ p.results }}</p>
  </section>
</div>
